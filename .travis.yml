dist: xenial
sudo: true
language: python
env:
  global:
    - COVERALLS_PARALLEL=true

install:
  - pip install tox
  - pip install coveralls

script:
  - tox -e $TOX_ENV -- --hypothesis-profile=ci --duration=20
  - if [[ $TOX_ENV == py* ]]; then coveralls; fi  # Upload coverage results from py* environments.

jobs:
  include:
    - stage: test
      python: "2.7"
      env: TOX_ENV="lint2"
    - python: "3.6"
      env: TOX_ENV="lint3"
    - python: "2.7"
      env: TOX_ENV="py27"
    - python: "3.5"
      env: TOX_ENV="py35"
    - python: "3.6"
      env: TOX_ENV="py36"
    - python: "3.7"
      env: TOX_ENV="py37"

    - stage: deploy
      install: skip
      script: skip
      deploy:
        provider: pypi
        user: mark_bell
        password:
          secure: jYIPoJnI5Ecw1/w1kT9HTytz5Qo5oFof+uNoeyX5M0H3CQY/ykiDtrle1jarE7niT6OPXo966eCFoQi/3LX6ll2FZHoaZ8jDKmnEPyquPwmj8AzyW7DdiplJ7wHdgVVcFILFNb1C5diCdgsO0NXIrqv7OGcTmgPVpLfMBohO9/uQ4cpYapm5oEDm8JEWHOzegSgNXc5vFxv6uS5d29HWxLDAPstD7nECSuBCzh6jrhV3RkAYR3rqbnJKbTT4gegjlIjSfJlvjIFPoSZqAdutqMO4tCbYtnPMXyRwMtfL+1E/E1eQ1+ObOqrjJtextIQNZ0lwZT7aLvSUGXv7goj+HruPH9ehMpfeTZfbEfMQewpDsmRjbbfpJoz5ohSMnFFiCZPQwvXErqcOeXPWnUqRELA3+LPyBaoQq2t+uEmMhkv29xqP771z2yCPCbg3k5vUoa9pWjyhyHaMn5lhu5QvuHZ6PEkU2I13Y9Sw7PFEoNlhf5rbYqJPjfC22SmgcR+Ydky30jVjD8oyr4uKuSIsS6IYA5oK98CYx0qjbNUdPbfH7tCjuWxuOYpasALNAAaqNiGKVFTkZMffL06SNaD2TT0E/bhDrxhxEu3Qc8MG58P4D+5ZbXaDRohIc52psCdu7SG9XLbuLBZVcvH4HKelaAwM3dFeJ9GLTWPFv7J/vcU=
        on:
          tags: true

